---
---

<button
  id="theme-toggle"
  class="p-2 rounded-lg bg-terminal-green/10 hover:bg-terminal-green/20 transition-colors"
  aria-label="Toggle theme"
  role="switch"
  aria-checked="false"
>
  <span class="dark:hidden text-xl" aria-hidden="true">üåô</span>
  <span class="hidden dark:inline text-xl" aria-hidden="true">‚òÄÔ∏è</span>
</button>

<script>
  const handleToggleClick = () => {
    const element = document.documentElement;
    const isDark = element.classList.contains('dark');
    const button = document.getElementById('theme-toggle');
    
    element.classList.toggle('dark');
    element.classList.toggle('light');
    
    localStorage.setItem('theme', isDark ? 'light' : 'dark');
    
    if (button) {
      button.setAttribute('aria-checked', (!isDark).toString());
    }
    
    // Force a repaint to ensure all CSS variables are updated
    document.body.style.display = 'none';
    document.body.offsetHeight;
    document.body.style.display = '';
  };

  document
    .getElementById('theme-toggle')
    ?.addEventListener('click', handleToggleClick);

  // Set initial aria-checked state
  const button = document.getElementById('theme-toggle');
  if (button) {
    button.setAttribute('aria-checked', 
      document.documentElement.classList.contains('dark').toString()
    );
  }
</script>